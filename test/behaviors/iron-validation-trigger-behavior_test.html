<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

    <script src="../../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../../web-component-tester/browser.js"></script>

    <link rel="import" href="../../../iron-input/iron-input.html">
    <link rel="import" href="testimpl-validation-trigger-behavior.html">
    <link rel="import" href="../validators/cats-only.html">

</head>
<body>


<test-fixture id="basic">
    <template>
        <input is="testimpl-validation-trigger-behavior" validator="cats-only" label="Voornaam" required auto-validate>
    </template>
</test-fixture>


<test-fixture id="prefilled">
    <template>
        <input is="testimpl-validation-trigger-behavior" pattern="[A-Za-z]*" label="Voornaam" required auto-validate
               value="bla"
               validator="cats-only">
    </template>
</test-fixture>

<test-fixture id="noAutoValidate">
    <template>
        <input is="testimpl-validation-trigger-behavior" pattern="[A-Za-z]*" label="Voornaam" required>
    </template>
</test-fixture>


<script>
    suite('testimpl-validation-trigger-behavior tests', function () {

        var input;

        setup(function () {
            input = fixture('basic');
        });


        test('set dirty and touched to false on init', function () {
            assert.equal(input.dirty, false);
            assert.equal(input.touched, false);
        });

        test('set to dirty when value changed', function () {
            input.bindValue = 'foobar';
            assert.equal(input.dirty, true);
        });

        test('set to touched when field left after focus', function () {
            input.focus();
            input.bindValue = '000';
            input.blur();
            assert.equal(input.touched, true);
        });

        suite('Prefilled input', function () {

            test('set touched once instantiated', function () {
                input = fixture('prefilled');
                assert.isTrue(input.touched, 'input is touched');
            });

        });

    });

</script>

</body>
</html>
